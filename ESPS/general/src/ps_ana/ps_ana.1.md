# NAME

    ps_ana - pitch-synchronous linear-prediction analysis

# SYNOPSIS

**ps_ana** \[ **-P** *param_file* \] \[ **-f** *out_f0file* \] \[
**-{pr}** *range* \] \[ **-s** *range* \] \[ **-o** *order* \] \[ **-S**
*frame_step* \] \[ **-i** *frame_step* \] \[ **-c** *spec_rep* \] \[
**-m** *spec_method* \] \[ **-w** *window* \] \[ **-e** *preemphasis* \]
\[ **-z** \] \[ **-x** *debug_level* \] **in_data** **in_pulse**
**out_file**

# DESCRIPTION

*Ps_ana* performs a pitch-synchronous LP (linear prediction) analysis.
The input file *in_data* is a speech signal stored in a FEA_SD file. The
input file *in_pulse*, typically generated by the *epochs(1-ESPS)*
program, is a FEA_SD(5-ESPS) file that contains pitch pulse locations of
*in_data*. Either *in_data* or *in_pulse,* but not both, may be "-", for
standard input.

The output file *out_file* is a FEA file that contains spectral
parameters of the specified type. Analysis results such as signal RMS,
F0, and voicing state can optionally be stored in the *out_f0file*
indicated by the *-f* option. The pitch-synchronously derived quantities
in *outfile* and *out_f0file* are periodically resampled at 200 Hz,
unless the frame step size is otherwise specified using the **-S** or
**-i** option. In any case the periodic resampling is performed by
choosing the values of the pitch-synchronous parameters from the glottal
epoch closest to the periodic sampling instant, rather than by
interpolation.

# OPTIONS

The following options are supported:

**-P** *param_file \[params\]*  
uses the parameter file *param_file* rather than the default, which is
*params*.

**-f** *out_f0file*  
The output file name of a file to store analysis results of signal RMS,
F0 (fundamental frequency), and voicing state. These results are
periodically resampled at the same rate as those in the "out_file".

**-r** *first:last*  
**-r** *first:+incr*  
Determines the range of points from input file. In the first form, a
pair of unsigned integers gives the first and last points of the range.
If *first* is omitted, 1 is used. If *last* is omitted, the last point
in the file is used. The second form is equivalent to the first with
*last = first + incr*. If the range is omitted, the entire file is
processed.

**-p** **  
Same as the **-r** option.

**-s** *first:last*  
**-s** *first:+incr*  
Same function as the **-r** option, but specifies the range of input
data in seconds.

**-o** *order \[0\]*  
Order for LP analysis. The default value 0 means the program will choose
an order equal to *2 + (Fs/1000)*, where *Fs* is the sampling frequency
of the input data file *in_data*.

**-S** *frame_step \[0.005 \* sampling frequency\]*  
Specifies frame step in samples.

**-i** *frame_step \[0.005\]*  
Specifies frame step in seconds.

**-c** *spec_rep \[RC\]*  
Spectral analysis type. Valid value is *"RC"* for reflection
coefficients, or *"AFC"* for autoregressive filter coefficients (or
linear prediction coefficients).

**-m** *spec_method \[AUTOC\]*  
Method to compute *spec_rep*. Valid value is *"AUTOC"* for
autocorrelation method, or *"COV"* for covariance method.

**-w** *window \[HANNING\]*  
Windowing technique used in the spectral analysis method. Valid value is
*"HANNING"*, *"HAMMING"*, *"RECT"*, or *"COS4"*, for Hanning, Hamming,
rectangular, and cos4 window, respectively.

**-p** *preemphasis \[0.95\]*  
First-order preemphasis filter constant used before the LPC analysis.
Note that the RMS values returned in the optional *out_f0file* are based
on the preemphasized signal in the pitch-synchronous analysis window.

**-z**  
This option reverses the signs of output LPC parameters in *outfile*.

**-x** *debug_level \[0\]*  
If *debug_level* is positive, *ps_ana* prints debugging messages and
other information on the standard error output. The messages proliferate
as the *debug_level* increases. If *debug_level* is 0 (the default), no
messages are printed.

# ESPS PARAMETERS

The following ESPS parameters have the same meanings as the command-line
options.

*start - integer*  
> The first point in the input sampled data file that is processed. A
> value of 1 denotes the first sample in the file. This is only read if
> the **-p** option is not used. If it is not in the parameter file, the
> default value of 1 is used.

*nan - integer*  
> The total number of data points to process. If *nan* is 0, the whole
> file is processed. *Nan* is read only if the **-p** option is not
> used. (See the discussion under **-pfP).**

 *frame_step - float*  
Analysis frame step interval to use when resampling the output
parameters. Valid values are in the range \[1/Fs 0.1\].

*order - int*  
> See OPTIONS.

*spec_rep - string*  
> See OPTIONS.

*spec_method - string*  
> See OPTIONS.

*window - string*  
> See OPTIONS.

*preemphasis - float*  
> See OPTIONS.

*per_step - float*  
> Step size in seconds for periodic analysis in unvoiced regions.

*per_wsize - float*  
> Window duration in seconds for periodic analysis in unvoiced regions.

*ps_wsize - float*  
> Window duration in fraction of voiced pitch period. See also the
> *phase* parameter.

*stability - float*  
> Stability factor in -dB.

*phase - float*  

This is a number between 0 and 1. Value 0 means the location of the
window center will be the same as the epoch pulse location. A value of
0.75, (the default) causes the window to be centered in the middle of
the "closed glottis" region, assuming an "open quotient" of 0.5.

# ESPS COMMON

No ESPS common parameter processing is supported.

# ESPS HEADERS

The usual *record_freq*, *start_time* header items, and all supported
ESPS parameters are stored as generic header items.

The bandwidth of *in_data*, usually one half of its sampling frequency,
is recorded as a generic header item *bandwidth* of DOUBLE type.

# FUTURE CHANGES

# EXAMPLES

The manual page for *epochs* includes an example of glottal epoch
detection such as might be performed before using *ps_ana*. Assuming one
has a file "spch.pe" containing impulses at the estimated instants of
glottal closure, and a speech file called "spch.sd", the following
command will produce the files "spch.f0ps" and "spch.rc". The ".f0ps"
file has F0 estimates obtained by inverting the inter-pulse intervals
from the ".pe" file and RMS computed from the epoch-synchronous windows
of preemphasized data used by the LPC analysis.

ps_ana -f spch.f0ps spch.sd spch.pe spch.rc

# ERRORS AND DIAGNOSTICS

# BUGS

None known.

# REFERENCES

Talkin, D. and Rowley, J., "Pitch-Synchronous analysis and synthesis for
TTS systems," *Proceedings of the ESCA Workshop on Speech* Synthesis, C.
Benoit, Ed., Imprimerie des Ecureuils, Gieres, France, 1990.

# SEE ALSO

lp_syn(1-ESPS), formant(1-ESPS), get_f0(1-ESPS),\
epochs(1-ESPS), get_resid(1-ESPS), FEA(5-ESPS),\
FEA_SD(5-ESPS)

# AUTHOR

David Talkin, Derek Lin
