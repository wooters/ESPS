# NAME

    formsy -  simple, cascaded, pitch-excited speech formant synthesis

# SYNOPSIS

**formsy** \[ **-P** *param_file* \] \[ **-b** *bandwidths (n.m)* \] \[
**-r** *frame_rate_scale* \] \[ **-a** *formant_scale* \] \[ **-v**
*voice_prob* \] \[ **-l** *min_bandwidth* \] \[ **-n** *n_formants* \]
\[ **-s** *synthesis_rate* \] \[ **-h** *n_high_pole_formants* \] \[
**-f** *f0_scale* \] \[ **-g** \] \[ **-e** *excite_file* \] \[ **-x**
*debug_level* \] *f0file* *fbfile* *outfile*

# DESCRIPTION

*Formsy* performs a simple n-formant synthesizer. The input file
*f0file* is a FEA file containing 3 fields: *F0* for fundamental
frequency, *prob_voice* for probability of voicing, and *rms* for
amplitude; the input file *fbfile* is a FEA file that contains 2 fields:
*fm* for formant frequency and *fb* for formant bandwidths. Typically,
these input files are generated by *get_f0(1-ESPS)* and
*formant(1-ESPS)*. The output file *outfile* is a synthesized speech
file of FEA_SD format of SHORT data type.

*Formsy* is designed to help assess the validity of formants and F0
estimates, it is not a serious attempt at quality synthesis and should
be used accordingly.

If an explicit excitation source, rather than a parametric source such
as *f0file*, should be used for input, use the **-e** option to specify
a FEA_SD file of SHORT data type.

# OPTIONS

The following options are supported:

**-P** *param_file \[params\]*  
uses the parameter file *param_file* rather than the default, which is
*params*.

**-b** *bandwidths (n.m)*  
Instead of using the bandwidths from the input *fbfile*, bandwidths are
synthesized from formant frequencies by the formula: bandwidth = n + (
.m \* formant frequency).

**-r** *frame_rate_scale \[1.0\]*  
A scale factor to multiply the frame rates of both the input files
*f0file* and *fbfile*. This can be used to change the effective speech
rate without scaling either pitch or formants.

**-a** *formant_scale \[1.0\]*  
A scale factor to multiply the formant frequencies in *fbfile*. This can
scale the effective size of the vocal tract up or down.

**-v** *voice_prob*  
If this is specified, the probability of voicing in the *f0file* file is
ignored and the value of *voice_prob* is used throughout the synthesis
instead. A valid value lies in the interval \[0, 1\].

**-l** *min_bandwidth*  
If this is specified, bandwidths from the *fbfile* file are constrained
to be greater than this value. The **-b** and **-l** options are
mutually exclusive

**-n** *n_formants*  
Specifies the first *n_formants* formants in *fbfile* to use for
synthesis. That is, if the file contains m formants (m \>= n), then only
the first n formants (and bandwidths) will be used during synthesis.

**-s** *synthesis_rate \[16000\]*  
Specifies the output sampling rate.

**-h** *n_high_pole_formants*  
Specifies *n_high_pole_formants* constant "higher-pole" formants during
synthesis. These are held at constant frequencies consistent with the
average values of the lower, variable formant frequencies read from the
".fb" file.

**-f** *f0_scale \[1.0\]*  
A scale factor to multiply the fundamental frequency from *f0file*.

**-g**  
If specified, amplitude correction is applied after synthesis. This
tends to improve the quality in the voiced regions and degrade quality
in unvoiced regions. This tries to compensate for residual energy in the
formant filters from one frame to the next.

**-e** *excite_file*  
The name of a FEA_SD file of SHORT data type to use for excitation. If
**-e** is specified, the *f0file* must NOT be specified and the **-v**,
**-s**, **-f**, **-r**, and **-g** options are not available; the
synthesis frequency will be that of the excitation file.

**-x** *debug_level \[0\]*  
If *debug_level* is positive, *formsy* prints debugging messages and
other information on the standard error output. The messages proliferate
as the *debug_level* increases. If *debug_level* is 0 (the default), no
messages are printed.

# ESPS PARAMETERS

The following ESPS parameters have the same meanings as the command line
options supported

*bandwidths - string*  
A value of "0.0" means *formsy* will use formant bandwidths from
*fbfile*. Otherwise, formant bandwidths are determined as described
above.

*frame_rate_scale - float*  
*formant_scale - float*  
*voice_prob - float*  
A value of -1 means *formsy* will use *prob_voice* field in *f0file* to
make voicing decision.

*min_bandwidth - float*  
*n_formants - int*  
A value of -1 means *formsy* will use all formants available.

*synthesis_rate - float*  
*n_high_pole_formants - int*  
*f0_scale - float*  
*amp_correct - string*  
*excite_file - string*  

# ESPS COMMON

No ESPS common parameter processing is supported

# ESPS HEADERS

The usual *record_freq*, *start_time* header items, and the appropriate
parameters used during processing are stored as generic header items.

# FUTURE CHANGES

# EXAMPLES

# ERRORS AND DIAGNOSTICS

# BUGS

The input file *f0file* must have fields stored in the following order:
F0, prob_voice, rms. This is not a problem if *f0file* is generated by
*get_f0(1-ESPS)* or *formant(1-ESPS)*. Otherwise, use *psps(1-ESPS)* to
check the field order and *mergefea(1-ESPS)* to rearrange the order. The
bug will be corrected in the future.

# REFERENCES

# SEE ALSO

    get_f0(1-ESPS), formant(1-ESPS), lp_syn(1-ESPS),
    FEA(5-ESPS).

# AUTHORS

David Talkin, Derek Lin
